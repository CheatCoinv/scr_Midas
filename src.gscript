{"$type":"GPMAutomateEditor.Models.Editor, GPMAutomateEditor.Models","before_init":{"$type":"GPMAutomateEditor.Models.NormalBlockNode, GPMAutomateEditor.Models","nodes":[{"$type":"GPMAutomateEditor.Models.ActionNode, GPMAutomateEditor.Models","type":1,"element_xpath":null,"output_variable_name":"url_ref","delay":"0,0","id":"b3020bc7-6e1b-4332-87e0-9dcf77205aba","display_text":null,"raw_input":"[{\"Key\":\"VALUE\",\"Value\":\"\"},{\"Key\":\"ALLOW_USER_INPUT\",\"Value\":\"True\"},{\"Key\":\"USER_INPUT_TYPE\",\"Value\":\"Text\"}]","comment":"LINK vào tele web"},{"$type":"GPMAutomateEditor.Models.ActionNode, GPMAutomateEditor.Models","type":1,"element_xpath":null,"output_variable_name":"after_to_iframe","delay":"0,0","id":"a0dcc24e-bac7-44bb-855d-d44e6b5982fa","display_text":null,"raw_input":"[{\"Key\":\"VALUE\",\"Value\":\"\"},{\"Key\":\"ALLOW_USER_INPUT\",\"Value\":\"True\"},{\"Key\":\"USER_INPUT_TYPE\",\"Value\":\"Text\"}]","comment":"Xpath sau khi vào iframe"},{"$type":"GPMAutomateEditor.Models.ActionNode, GPMAutomateEditor.Models","type":1,"element_xpath":null,"output_variable_name":"data_save","delay":"0,0","id":"0832f20c-bcef-436d-8540-8978347fcb43","display_text":null,"raw_input":"[{\"Key\":\"VALUE\",\"Value\":\"\"},{\"Key\":\"ALLOW_USER_INPUT\",\"Value\":\"True\"},{\"Key\":\"USER_INPUT_TYPE\",\"Value\":\"File\"}]","comment":"Lưu Iframe"}],"expanded":true,"id":"c0d83995-4e4e-4c84-9415-cbcc27fe3a4e","display_text":null,"raw_input":null,"comment":"Before browser opened"},"main_logic":{"$type":"GPMAutomateEditor.Models.NormalBlockNode, GPMAutomateEditor.Models","nodes":[{"$type":"GPMAutomateEditor.Models.ActionNode, GPMAutomateEditor.Models","type":39,"element_xpath":null,"output_variable_name":null,"delay":"0,0","id":"a4ff6226-ccbe-4cb9-b349-37dea357bdd3","display_text":null,"raw_input":"[{\"Key\":\"URL\",\"Value\":\"$url_ref\"}]","comment":null},{"$type":"GPMAutomateEditor.Models.ActionNode, GPMAutomateEditor.Models","type":44,"element_xpath":"//button[@class='popup-button btn primary rp' and .//span[@class='i18n' and text()='Launch']]","output_variable_name":null,"delay":"0,0","id":"5e62d604-966a-4d8f-813a-64e0bcca94fd","display_text":null,"raw_input":"[{\"Key\":\"TIME_OUT\",\"Value\":\"30\"}]","comment":""},{"$type":"GPMAutomateEditor.Models.IfBlockNode, GPMAutomateEditor.Models","nodes":[{"$type":"GPMAutomateEditor.Models.ActionNode, GPMAutomateEditor.Models","type":48,"element_xpath":null,"output_variable_name":null,"delay":"0,0","id":"a31cb338-9f8e-49f2-b711-27e78df12d47","display_text":null,"raw_input":"[{\"Key\":\"CLICK_TYPE\",\"Value\":\"CLICK_XPATH\"},{\"Key\":\"XPATH\",\"Value\":\"//button[@class='popup-button btn primary rp' and .//span[@class='i18n' and text()='Launch']]\"},{\"Key\":\"POS\",\"Value\":\"\"}]","comment":"Click Launch"},{"$type":"GPMAutomateEditor.Models.ActionNode, GPMAutomateEditor.Models","type":44,"element_xpath":"//iframe","output_variable_name":null,"delay":"300,400","id":"56930fbd-a5e4-4b61-b8a4-2be7d5931370","display_text":null,"raw_input":"[{\"Key\":\"TIME_OUT\",\"Value\":\"15\"}]","comment":null},{"$type":"GPMAutomateEditor.Models.IfBlockNode, GPMAutomateEditor.Models","nodes":[{"$type":"GPMAutomateEditor.Models.ActionNode, GPMAutomateEditor.Models","type":45,"element_xpath":"//iframe[contains(@class, 'payment-verification')]","output_variable_name":"linkdata","delay":"1000,3000","id":"239fcfbf-4778-4792-b1bd-708b387d78fd","display_text":null,"raw_input":"[{\"Key\":\"ATTR_NAME\",\"Value\":\"src\"}]","comment":"Wait Iframe"},{"$type":"GPMAutomateEditor.Models.ActionNode, GPMAutomateEditor.Models","type":68,"element_xpath":null,"output_variable_name":"userdata","delay":"1000,3000","id":"8067c5db-1fc0-42b3-a198-0513ad355294","display_text":null,"raw_input":"[{\"Key\":\"FILE_OR_CODE\",\"Value\":\"return decodeURIComponent('$linkdata').match('tgWebAppData=(.*)&tgWebAppVersion')[1];\"}]","comment":"Get Data"},{"$type":"GPMAutomateEditor.Models.ActionNode, GPMAutomateEditor.Models","type":68,"element_xpath":null,"output_variable_name":"id_tele","delay":"0,0","id":"e8e6893c-297e-4e59-95e9-0ab032801eea","display_text":null,"raw_input":"[{\"Key\":\"FILE_OR_CODE\",\"Value\":\"const data_iframe = new URLSearchParams(`$userdata`);\\r\\nconst info_iframe = JSON.parse(data_iframe.get('user'));\\r\\nreturn info_iframe.id;\"}]","comment":"id_tele"},{"$type":"GPMAutomateEditor.Models.ActionNode, GPMAutomateEditor.Models","type":62,"element_xpath":"//iframe","output_variable_name":null,"delay":"3000,4000","id":"68abde1a-edba-418d-92f3-fb49c6a24b96","display_text":null,"raw_input":"[]","comment":"Chuyển qua iframe"},{"$type":"GPMAutomateEditor.Models.ActionNode, GPMAutomateEditor.Models","type":44,"element_xpath":"$after_to_iframe","output_variable_name":null,"delay":"500,700","id":"80096fa6-672f-409a-9ccf-903ef90e72f8","display_text":null,"raw_input":"[{\"Key\":\"TIME_OUT\",\"Value\":\"25\"}]","comment":null},{"$type":"GPMAutomateEditor.Models.IfBlockNode, GPMAutomateEditor.Models","nodes":[{"$type":"GPMAutomateEditor.Models.ActionNode, GPMAutomateEditor.Models","type":48,"element_xpath":null,"output_variable_name":null,"delay":"5000,7000","id":"a727e7a5-5373-4cbc-a539-c5c7de5d3261","display_text":null,"raw_input":"[{\"Key\":\"CLICK_TYPE\",\"Value\":\"CLICK_XPATH\"},{\"Key\":\"XPATH\",\"Value\":\"$after_to_iframe\"},{\"Key\":\"POS\",\"Value\":\"\"}]","comment":null}],"expanded":false,"id":"dfadd9cd-f7ae-47c6-8a59-1814c3c30b9e","display_text":null,"raw_input":"[{\"Key\":\"CONDITION\",\"Value\":\"hasElement($after_to_iframe)\"}]","comment":null},{"$type":"GPMAutomateEditor.Models.ActionNode, GPMAutomateEditor.Models","type":71,"element_xpath":null,"output_variable_name":null,"delay":"200,300","id":"ca78130c-f96c-4fa4-a027-0c71367d77c6","display_text":null,"raw_input":"[{\"Key\":\"FILE_PATH\",\"Value\":\"$data_save\"},{\"Key\":\"SHEET_ID\",\"Value\":\"0\"},{\"Key\":\"COL_NAME_OR_INDEX\",\"Value\":\"A\"},{\"Key\":\"DATA\",\"Value\":\"$profileName|$linkdata|$userdata\"}]","comment":null}],"expanded":true,"id":"49a4bf54-a0cd-4e11-9a2e-58d6ab6186d2","display_text":null,"raw_input":"[{\"Key\":\"CONDITION\",\"Value\":\"hasElement(//iframe)\"}]","comment":null},{"$type":"GPMAutomateEditor.Models.ElseBlockNode, GPMAutomateEditor.Models","nodes":[{"$type":"GPMAutomateEditor.Models.ActionNode, GPMAutomateEditor.Models","type":68,"element_xpath":null,"output_variable_name":null,"delay":"2000,3000","id":"9a179724-8f47-4cb8-baea-7bc28b3c4ef6","display_text":null,"raw_input":"[{\"Key\":\"FILE_OR_CODE\",\"Value\":\"throw new Error('Không tháy iframe');\"}]","comment":"Tài khoản ko khả dụng"}],"expanded":false,"id":"4323dff3-4356-49da-b15f-8429de8016d3","display_text":null,"raw_input":"[]","comment":"KO CO IFRAME - End Block"}],"expanded":true,"id":"51a33060-38b6-4d15-9a69-8dc2ff493c2e","display_text":null,"raw_input":"[{\"Key\":\"CONDITION\",\"Value\":\"hasElement(//button[@class='popup-button btn primary rp' and .//span[@class='i18n' and text()='Launch']])\"}]","comment":null},{"$type":"GPMAutomateEditor.Models.ElseBlockNode, GPMAutomateEditor.Models","nodes":[{"$type":"GPMAutomateEditor.Models.ActionNode, GPMAutomateEditor.Models","type":68,"element_xpath":null,"output_variable_name":null,"delay":"0,0","id":"a2113b67-5d53-4792-96d1-fcab58852b46","display_text":null,"raw_input":"[{\"Key\":\"FILE_OR_CODE\",\"Value\":\"throw new Error('Không tháy iframe');\"}]","comment":null}],"expanded":false,"id":"fd21792c-4cd5-4384-8c8e-3dfe8d51beff","display_text":null,"raw_input":null,"comment":null}],"expanded":true,"id":"2bfc158a-d81f-4f38-8a1a-fa8f9c7d5b48","display_text":null,"raw_input":null,"comment":"Main logic"},"after_quit":{"$type":"GPMAutomateEditor.Models.NormalBlockNode, GPMAutomateEditor.Models","nodes":[],"expanded":false,"id":"564af219-36ce-4e5a-8b83-6c41a360fc98","display_text":null,"raw_input":null,"comment":"After browser closed"}}